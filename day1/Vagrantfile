# -*- mode: ruby -*-
# vi: set ft=ruby :

Vagrant.configure("2") do |config|
 config.vm.define "zabbix_server" do |server|
    config.vm.box = "sbeliakou/centos-7.3-x86_64-minimal"
    config.vm.hostname = "zabbix"

    config.vm.network :private_network, ip: "1.1.1.1"
    config.vm.network:forwarded_port,guest:80,host:8080,auto_correct:true
    config.vm.network:forwarded_port,guest:8080,host:8090,auto_correct:true

    config.vm.provider 'virtualvm' do |v|
        v.memory = "1248"
        v.name = "zabbix-vm"
    end
    config.vm.provision "shell", path: "provision.sh"
 end

 config.vm.define("2") do |slave|
        slave.vm.box = "sbeliakou/centos-7.3-x86_64-minimal"
        slave.vm.hostname = "zabbix2"

        slave.vm.network :private_network, ip: "1.1.1.2"
        slave.vm.provider 'virtualvm' do |v|
            v.memory = "500"
            v.name = "zabbix-vm"
        end
    slave.vm.provision "shell", path: "provision-slave.sh"
 end
end

